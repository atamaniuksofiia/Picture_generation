{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const BASE_URL = 'https://pixabay.com/api/';\nexport const API_KEY = '46237249-998f0f24dffb15788a2eb0e4e';\n\nexport async function fetchImages(query, page) {\n    const response = await fetch(`${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`);\n    if (!response.ok) {\n        throw new Error('Failed to fetch images');\n    }\n    const data = await response.json();\n    return {\n        images: Array.isArray(data.hits) ? data.hits : [],\n        totalHits: data.totalHits,\n    };\n}\n\n\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { BASE_URL, API_KEY } from './pixabay-api.js';\n\n// export async function fetchImages(query, page = 1) {\n//     const params = new URLSearchParams({\n//         key: API_KEY,\n//         q: query,\n//         image_type: 'photo',\n//         orientation: 'horizontal',\n//         safesearch: 'true',\n//         page: page,\n//         per_page: 15,\n//     });\n//     const url = `${BASE_URL}?${params}`;\n\n//     try {\n//         const response = await axios.get(url);\n//         if (response.status !== 200) {\n//             throw new Error('Network response was not ok');\n//         }\n//         return response.data.hits;\n//     } catch (error) {\n//         iziToast.error({\n//             title: 'Error',\n//             message: \"Sorry, there are no images matching your search query. Please try again!\",\n//         });\n//         return [];\n//     }\n// }\n\nexport function createImageMarkup(images) {\n    const markup = images\n        .map(\n            ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n                <li class=\"gallery-item\">\n                    <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n                    </a>\n                    <div class=\"info\">\n                        <p class=\"info-item\"><span>Likes:</span> ${likes}</p>\n                        <p class=\"info-item\"><span>Views:</span> ${views}</p>\n                        <p class=\"info-item\"><span>Comments:</span> ${comments}</p>\n                        <p class=\"info-item\"><span>Downloads:</span> ${downloads}</p>\n                    </div>\n                </li>\n            `)\n        .join('');\n\n    const gallery = document.querySelector('.gallery');\n    gallery.insertAdjacentHTML('beforeend', markup);\n}","import {createImageMarkup } from './js/render-functions';\nimport {fetchImages } from './js/pixabay-api';\nimport { BASE_URL, API_KEY } from './js/pixabay-api.js';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.js-btn-load');\nconst loader = document.querySelector('.loader');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nloadMoreBtn.classList.add('is-hidden');\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = document.querySelector('input[name=\"query\"]').value.trim();\n\n    if (!query) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Search query cannot be empty.',\n        });\n        return;\n    }\n\n    gallery.innerHTML = '';\n    page = 1;\n    loadMoreBtn.classList.add('is-hidden');\n    loader.classList.remove('is-hidden');\n\n    try {\n        const { images, totalHits: total } = await fetchImages(query, page);\n        totalHits = total; \n\n        if (images.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        } else {\n            createImageMarkup(images);\n            lightbox.refresh();\n            loadMoreBtn.classList.toggle('is-hidden', totalHits <= 15);\n        }\n    } catch (error) {\n        console.error(error);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images. Please try again later.',\n        });\n    } finally {\n        loader.classList.add('is-hidden');\n    }\n});\n\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    loadMoreBtn.classList.add('is-hidden');\n    loader.classList.remove('is-hidden');\n\n    page += 1;\n    \n    try {\n        const { images, totalHits: total } = await fetchImages(query, page);\n        \n        if (images.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            loadMoreBtn.classList.add('is-hidden');\n            return;\n         } \n            createImageMarkup(images);\n            lightbox.refresh();\n\n             if (images.length < 15 || page * 15 >= totalHits) {\n                loadMoreBtn.classList.add('is-hidden');\n            }  else {\n                loadMoreBtn.classList.remove('is-hidden');\n            }\n\n        const galleryItemHeight = document.querySelector('.gallery-item')?.getBoundingClientRect().height || 0;\n        window.scrollBy({\n            top: galleryItemHeight * 2,\n            behavior: 'smooth',\n        });\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images. Please try again later.',\n        });\n    } finally {\n        loader.classList.add('is-hidden');\n    }\n});\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","response","data","createImageMarkup","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loadMoreBtn","loader","totalHits","lightbox","SimpleLightbox","event","iziToast","total","error","galleryItemHeight","_a"],"mappings":"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"}